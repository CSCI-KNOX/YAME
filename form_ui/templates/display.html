<!DOCTYPE html>
<html>
    <head>
        <title>Display</title>
        <link rel= "stylesheet" type= "text/css" href= "{{ url_for('static',filename='css/display.css') }}">
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
        <script src="../static/js/tabs.js" defer></script>

        <!-- <meta http-equiv="refresh" content="1"> -->
    </head>
    <body>
      <div class="about">
        {% for i in range(personarr.count()) %}
      <div id="Person{{ i }}" class="tabcontent">
        <h1>{{ personarr[i]['name'] }}</h1>
        <p><img src='../static/imj/{{ personarr[i]['image_name'] }}' width='200' height='160' alt='{{ personarr[i]['alt_txt'] }}' title='{{ personarr[i]['alt_txt'] }}'></p>
        <p>
          {% for key in personarr[i] %}
            {% if key == 'ex' and personarr[i][key] == 1 %}
              <p class='expected'>ex </p>
            {% endif %}
            <p class='{{ key }}'> {{ personarr[i][key] }} </p>
          {% endfor %}
        </p>
      </div>
      {% endfor %}
    </div>
    <div class="loop">
      <div class="buttons" id="image_rotate">
        <button class="tablink" onclick="openCity('Person0', this) id="defaultOpen"><img src='../static/imj/{{ personarr[0]['icon_name'] }}' ></button>
        {% for i in range(1, personarr.count()) %}
            <button class="tablink" onclick="openCity('Person{{ i }}', this)"><img src='../static/imj/{{ personarr[i]['icon_name'] }}' ></button>
          <!-- looking to replace all person images in scroll bar with corresponding graphics in img folder, match graphics to person in db for this-->
          {% endfor %}
        </div>
      </div>
      <button onclick="scrollMe('left')"> < </button>
      <button onclick="scrollMe('right')"> > </button>
      <!-- adding jquery -->
    <script>
 
   $(document).ready(function() {
        // Container element which has a scrollbar
        var $c = $(".loop");
        // Child element which is taller than the container
        var $e = $(".buttons");
        // The point at which the page will loop when scrolling down
        var loopPoint = 240*{{ personarr.count() }} - $(window).width();

        console.log($(window).width());

        // Define a function which runs whenever the scroll position of $c changes
        $e.scroll(function () {
            console.log($e.scrollLeft());
            // If the new scroll position matches our loop point;
            if ($e.scrollLeft() === loopPoint) {
                // Scroll to (almost) the the top ('0' would be the top; we do this so we don't loop back again instantly)
                $e.scrollLeft(1);
            }
            // Otherwise, if the new scroll position = the top of the element
            else if ($e.scrollLeft() === 0) {
                // Scroll to (almost) the bottom, we can use (our loop point - 1)
                $e.scrollLeft(loopPoint - 1);
            }
        });
    });
 
    </script>
    </body>
</html>
